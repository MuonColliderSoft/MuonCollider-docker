###############################################################################
#  Repository: mucoll-ilc-framework
#  Tag:        1.0-centos8
###############################################################################

FROM mucoll-ilc-base:1.0-centos8

COPY release-ilcsoft.cfg /opt/iLCInstall/releases/development
COPY release-versions.py /opt/iLCInstall/releases/development

COPY ForwardTracking_CMakeLists.txt /opt/ilcsoft/v02-01-pre/ForwardTracking/v01-14/CMakeLists.txt

RUN cd /opt/iLCInstall && \
    ./ilcsoft-install releases/development/release-ilcsoft.cfg --install-prefix=/opt/ilcsoft -v -i

RUN cd /opt/ilcsoft/v02-01-pre && \
    git clone https://github.com/MuonColliderSoft/detector-simulation.git

RUN sed -i 's|/bin/env python|/usr/bin/env python2|g' /opt/ilcsoft/v02-01-pre/CEDViewer/v01-17/bin/ced2go

COPY profile.d_ilcsoft.sh /etc/profile.d/ilcsoft.sh

