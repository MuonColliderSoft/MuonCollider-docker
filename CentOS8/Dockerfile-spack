###############################################################################
#  Repository: mucoll-spack
#  Tag:        2.0-centos8stream
###############################################################################

FROM mucoll-environment:2.1-centos8stream

# Setting up Spack
RUN git clone -c feature.manyFiles=true --branch v0.18.1 https://github.com/spack/spack.git && \
    echo "source /opt/rh/gcc-toolset-11/enable" >> ~/setenv.sh && \
    echo "source ~/spack/share/spack/setup-env.sh" >> ~/setenv.sh

# Registering compilers with Spack
ENV SPACK_COLOR="always"
RUN source ~/setenv.sh && \
    spack compiler find && \
    spack compilers && \
    spack spec cmake

